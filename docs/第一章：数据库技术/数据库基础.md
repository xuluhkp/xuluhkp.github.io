# 今日内容介绍

<extoc></extoc>

# 基本概念

## 数据库的基本概念

		1. 数据库的英文单词： DataBase 简称 ： DB

		2. 什么数据库？
			* 用于存储和管理数据的仓库。

		3. 数据库的特点：

			* 持久化存储数据的。其实数据库就是一个文件系统

			* 方便存储和管理数据

			* 使用了统一的方式操作数据库 -- SQL

		4. 常见的数据库软件
			* 参见《MySQL基础.pdf》


# MySQL数据库软件

## 1. 安装

		参见《MySQL基础.pdf》

## 2. 卸载

		1. 去mysql的安装目录找到my.ini文件

			* 复制 datadir="C:/ProgramData/MySQL/MySQL Server 5.5/Data/"

		2. 卸载MySQL

		3. 删除C:/ProgramData目录下的MySQL文件夹。

## 3. 配置
### MySQL服务启动

		1. 手动。

		2. cmd--> services.msc 打开服务的窗口

		3. 使用管理员打开cmd
			* net start mysql : 启动mysql的服务
			* net stop mysql:关闭mysql服务

### MySQL登录
		1. mysql -uroot -p密码

		2. mysql -hip -uroot -p连接目标的密码

		3. mysql --host=ip --user=root --password=连接目标的密码

### MySQL退出
		1. exit
		2. quit

### MySQL目录结构
		1. MySQL安装目录：basedir="D:/develop/MySQL/"

			* 配置文件 my.ini

		2. MySQL数据目录：datadir="C:/ProgramData/MySQL/MySQL Server 5.5/Data/"
			* 几个概念
				* 数据库：文件夹
				* 表：文件
				* 数据：数据

# SQL

## 什么是SQL？
		Structured Query Language：结构化查询语言

		其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。

## SQL通用语法
		1. SQL 语句可以单行或多行书写，以分号结尾。

		2. 可使用空格和缩进来增强语句的可读性。

		3. MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。

		4. 三种注释
			* 单行注释: -- 注释内容 或 # 注释内容(mysql 特有)
			* 多行注释: `/* 注释 */`

## SQL分类

		1. DDL(Data Definition Language)数据定义语言

			用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等

		2. DML(Data Manipulation Language)数据操作语言

			用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等

		3. DQL(Data Query Language)数据查询语言

			用来查询数据库中表的记录(数据)。关键字：select, where 等

		4. DCL(Data Control Language)数据控制语言(了解)

			用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等

## DDL:操作数据库CRUD

### C(Create):创建
		* 创建数据库：
			* create database 数据库名称;
		* 创建数据库，判断不存在，再创建：
			* create database if not exists 数据库名称;
		* 创建数据库，并指定字符集
			* create database 数据库名称 character set 字符集名;

		* 练习： 创建db4数据库，判断是否存在，并制定字符集为gbk
			* create database if not exists db4 character set gbk;

### R(Retrieve)：查询
		* 查询所有数据库的名称:
			* show databases;
		* 查询某个数据库的字符集:查询某个数据库的创建语句
			* show create database 数据库名称;

### U(Update):修改
		* 修改数据库的字符集
			* alter database 数据库名称 character set 字符集名称;

### D(Delete):删除
		* 删除数据库
			* drop database 数据库名称;
		* 判断数据库存在，存在再删除
			* drop database if exists 数据库名称;

### 使用数据库
		* 查询当前正在使用的数据库名称
			* select database();
		* 使用数据库
			* use 数据库名称;

## DDL:操作数据库表CRUD
### C(Create):创建
#### 语法：
```sql
create table 表名(
  列名1 数据类型1,
  列名2 数据类型2,
  ....
  列名n 数据类型n
);
```

#### 数据类型

| JAVA类型 | 数据库类型     |   说明    |
| :------------- | :------------- |:------------- |
| int/long       | int/bigint       |  整数类型, 例如: `age int`    |
| double/float   | double/float  | 浮点型, 例如:`score double(5,2)`  ,字段总长度为5,小数位数占2位  |
| Date           | date/time/datetime/timestamp  | 时间日期类型,date 只包含年月日,time 只包含时分秒,datetime/timestamp 包含年月日时分秒毫秒  |
| String         | char/varchar  |  字符串类型,例如:name varchar(20)   |

```
* 问题一: datetime/timestamp区别?

  如果一个字段使用timestamp区别类型,如果将来不给这个字段赋值，或赋值为null，则默认使用当前的系统时间，来自动赋值

  如果一个字段使用datetime区别类型,如果将来不给这个字段赋值，或赋值为null,那么值为null

* 问题二: char和varchar的区别?

  char和varchar都表示字符串类型,但是char表示的是固定长度的字符串,varchar表示可变长度的字符串
	  	name char(8) 	 hello 		  默认会占满8个长度,没有的使用空占位符 "hello   "
	  	name varchar(8)  hello      会占用5个长度 "hello"
	需要注意的是:不管使用char还是varchar,插入的数据都不能超过设置的最大长度
		  name char(8)     hello world   报错
		  name varchar(8)  hello world   报错
```



#### 注意事项
		1. 最后一列，不需要加逗号（,）

		2. 如果类型是字符串类型必须要加长度,如果是其他类型,会有默认长度

#### 示例:创建学生表
```sql
create table student(
  id int,
  name varchar(32),
  age int ,
  score double(4,1),
  birthday date,
  insert_time timestamp
);
```

#### 复制表：
```sql
create table 表名 like 被复制的表名;	 
```

### R(Retrieve)：查询
		1. 查询某个数据库中所有的表名称
			* show tables;

		2. 查询表结构
			* desc 表名;

### U(Update):修改
#### 1. 修改表名
  ```sql
  alter table 表名 rename to 新的表名;
  ```

#### 2. 修改表的字符集
  ```sql
  alter table 表名 character set 字符集名称;
  ```

#### 3. 添加一列
  ```sql
  alter table 表名 add 列名 数据类型;
  ```

#### 4. 修改列名称 类型
  ```sql
  alter table 表名 change 列名 新列别 新数据类型; -- 修改列的列名和类型
  alter table 表名 modify 列名 新数据类型;-- 只能修改列的类型
  ```

#### 5. 删除列
  ```sql
  alter table 表名 drop 列名;
  ```

### D(Delete):删除
#### 1. 删除表
  ```sql
  drop table 表名;

  drop table  if exists 表名 ; -- 如果表存在,删除表
  ```

## <font color='red'>DML：增删改表中数据(掌握)</font>

### 添加数据：
		* 语法：
			* insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);
		* 注意：
			1. 列名和值要一一对应。
			2. 如果表名后，不定义列名，则默认给所有列添加值
				insert into 表名 values(值1,值2,...值n);
			3. 除了数字类型，其他类型需要使用引号(单双都可以)引起来

### 删除数据：
		* 语法：
			* delete from 表名 [where 条件]
		* 注意：
			1. 如果不加条件，则删除表中所有记录。
			2. 如果要删除所有记录
				1. delete from 表名; -- 不推荐使用。有多少条记录就会执行多少次删除操作
				2. TRUNCATE TABLE 表名; -- 推荐使用，效率更高 先删除表，然后再创建一张一样的表。

### 修改数据：
		* 语法：
			* update 表名 set 列名1 = 值1, 列名2 = 值2,... [where 条件];

		* 注意：
			1. 如果不加任何条件，则会将表中所有记录全部修改。

# 作业
## 作业一:完成课堂上的案例
## 作业二:完成以下数据操作

1. 安装mysql数据库

2. 创建一个mydb1数据库，并查看。
```sql
create database mydb1;
show databases;
```

3. 创建一个day05数据库，指定字符编码为gb2312;
```sql
create database  day05  character set gb2312 ;
```

4. 修改day05数据库字符编码为utf8,并且指定校验规则utf8_bin;
```sql
alter database day05 character set utf8 collate utf8_bin
```

5. 创建一张表，表名employee ，表结构如下:

| 字段名		|	字段类型	|	长度			|
| :------------- | :------------- |:------------- |
| id			       |	整形				 |	11				  |
| name	         |	字符串				|	20				   |
| sex     	     |	字符串				|	10		       |   
| birthday	     |	日期				 |		          |     
| salary		     |	浮点型				|	10(2位小数)	 |    
| bonus		       |	浮点型				|	10(2位小数)	 |     
| department	   |	字符串				|	20				   |    
| resume		     |	字符串			 	|    200          |      

```sql
use mydb1;
create table employee(
	id   int(11) primary key,
	name   varchar(20) not null,
	sex   varchar(10),
	birthday   date ,
	salary   float(10,2) ,  -- 薪水
	bonus   float(10,2) ,   -- 奖金
	department varchar(20), -- 部门
	resume   varchar(200) -- 简介
);
```

6. 插入如下数据:

| id	|	name		|	sex			|	birthday	|	salary	|	bonus	|	department	|	resume   |
| :------------- | :------------- |:------------- |:------------- |:------------- |:------------- |:------------- |:------------- |
| 1	    |	zhangsan	|	male		|	1980-11-25	|	2000	|	100		|	总裁办		|	good body    |
| 2	    |	lisi		|	male		|	1980-04-25	|	1000	|	200		|	研发部		|	good body    |
| 3	    |	xiaohong	|	female		|	1978-11-25	|	4000	|	100		|	财务部		|	good girl    |
| 4	    |	wangwu		|	male		|	1981-01-25	|	4000	|	400		|	人事部		|	good girl    |
| 5	    |	zhaoliu		|	male		|	1978-12-25	|	2000	|			|	人事部		|	good girl    |
| 6	    |	tianqi		|	female		|	1998-05-25	|	2000	|	100		|	人事部		|	good girl    |
| 7	    |	renba		|	male		|	1968-10-25	|	3000	|	500	    |	财务部		|	good girl    |
| 8	    |	zhangjiu	|	male		|	1968-10-25	|	2000	|	100	    |	财务部		|	good girl    |

```sql
-- 插入员工数据
insert  into  employee values
(1,'zhangsan','male','1980-11-25',2000,100,'总裁办','good body'),
(2,'lisi','male','1980-04-25',1000,200,'研发部','good body'),
(3,'xiaohong','female','1978-11-25',4000,100,'财务部','good girl'),
(4,'wangwu','male','1981-01-25',4000,400,'人事部','good body'),
(5,'zhaoliu','male','1978-12-25',2000,NULL,'人事部','good body'),
(6,'tianqi','female','1998-05-25',2000,100,'人事部','good girl'),
(7,'renba','male','1968-10-25',3000,500,'财务部','good body');
```

7. 将研发部员工的薪水修改为2500
```sql
update employee set salary=2500 where department = '研发部'
```

8. 将姓名为’zhangsan’的员工薪水修改为3000元。
```sql
update employee set salary=3000 where name='zhangsan'
```

9. 将姓名为’lisi’的员工薪水修改为4000元,sex改为female。
```sql
update employee set salary=4000 ,sex='female' where name = 'lisi'
```

10. 公司统一给每位员工再发奖金500
```sql
update employee set bonus = ifnull(bonus,0)+500
```

11. 将xiaohong的薪水在原有基础上增加1000元。
```sql
update employee set salary = salary+1000 where name ='xiaohong'
```
